# QAアプリケーション CSVフォーマット仕様書

## 概要
このドキュメントは、QAアプリケーションで使用するCSVファイルのフォーマット仕様を定義します。

## CSVファイル形式

### ファイル形式
- **ファイル拡張子**: `.csv`
- **文字エンコーディング**: UTF-8
- **区切り文字**: カンマ (`,`)
- **改行コード**: LF (`\n`) または CRLF (`\r\n`)

### ヘッダー行
CSVファイルの1行目は必須のヘッダー行です。以下の列名を正確に記述してください：

```csv
question,answer,category,tags
```

### データ列の仕様

| 列名 | 必須 | データ型 | 最大長 | 説明 | 例 |
|------|------|----------|--------|------|-----|
| question | ○ | 文字列 | 500文字 | 質問内容 | "JavaScriptとは何ですか？" |
| answer | ○ | 文字列 | 2000文字 | 回答内容 | "JavaScriptはWebページに動的な機能を追加するプログラミング言語です" |
| category | ○ | 文字列 | 100文字 | カテゴリ名 | "プログラミング" |
| tags | △ | 文字列 | 200文字 | タグ（カンマ区切り） | "JavaScript,Web" |

### データ形式の詳細

#### 1. question（質問）
- **必須項目**
- 質問の内容を記述
- HTMLタグは使用不可
- 改行が必要な場合は `\n` を使用

#### 2. answer（回答）
- **必須項目**
- 質問に対する回答を記述
- HTMLタグは使用不可
- 改行が必要な場合は `\n` を使用

#### 3. category（カテゴリ）
- **必須項目**
- 質問のカテゴリを分類
- 単一のカテゴリ名のみ
- 日本語・英語どちらでも可

#### 4. tags（タグ）
- **任意項目**
- 複数のタグをカンマで区切って記述
- 各タグにスペースは含めない
- 例: `JavaScript,Web,基礎`

### 文字列のエスケープ

#### ダブルクォートの使用
- フィールドにカンマ、改行、ダブルクォートが含まれる場合は、フィールド全体をダブルクォートで囲む
- フィールド内のダブルクォートは `""` でエスケープ

#### 例
```csv
question,answer,category,tags
"JavaScriptの""Hello World""を表示するには？","console.log(""Hello World"")を使用します","プログラミング","JavaScript,基礎"
```

## サンプルCSVファイル

```csv
question,answer,category,tags
"JavaScriptとは何ですか？","JavaScriptはWebページに動的な機能を追加するプログラミング言語です","プログラミング","JavaScript,Web"
"HTMLの基本構造は？","HTML文書は<html><head><body>の基本構造を持ちます","マークアップ","HTML,基礎"
"CSSでスタイルを適用する方法は？","セレクタを使ってHTML要素にスタイルを適用します","スタイリング","CSS,デザイン"
"Node.jsとは何ですか？","Node.jsはサーバーサイドでJavaScriptを実行するためのランタイム環境です","バックエンド","Node.js,サーバー"
"SQLiteの特徴は？","SQLiteは軽量で組み込み可能なリレーショナルデータベースです","データベース","SQLite,DB"
```

## 注意事項

### データ品質
- 空の行は無視されます
- 必須フィールドが空の場合はエラーになります
- 文字数制限を超えた場合は切り詰められる可能性があります

### ファイルサイズ
- 推奨最大ファイルサイズ: 10MB
- 推奨最大レコード数: 10,000件

### エラーハンドリング
- 不正なフォーマットの行はスキップされます
- エラーログでスキップされた行数が報告されます

## テンプレートファイル

以下のテンプレートを使用してCSVファイルを作成できます：

```csv
question,answer,category,tags
"ここに質問を入力","ここに回答を入力","カテゴリ名","タグ1,タグ2"
```

## バリデーションルール

1. ヘッダー行が正確に一致していること
2. 必須フィールド（question, answer, category）が空でないこと
3. 文字数制限を超えていないこと
4. CSVフォーマットが正しいこと

このフォーマットに従ってCSVファイルを作成することで、QAアプリケーションに正常にデータを取り込むことができます。
